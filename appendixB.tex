\lstdefinelanguage{Kotlin}{
	comment=[l]{//},
	commentstyle={\color{gray}\ttfamily},
	emph={filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println},
	emphstyle={\color{OrangeRed}},
	identifierstyle=\color{black},
	keywords={!in, !is, abstract, actual, annotation, as, as?, break, by, catch, class, companion, const, constructor, continue, crossinline, data, delegate, do, dynamic, else, enum, expect, external, false, field, file, final, finally, for, fun, get, if, import, in, infix, init, inline, inner, interface, internal, is, lateinit, noinline, null, object, open, operator, out, override, package, param, private, property, protected, public, receiveris, reified, return, return@, sealed, set, setparam, super, suspend, tailrec, this, throw, true, try, typealias, typeof, val, var, vararg, when, where, while},
	keywordstyle={\color{NavyBlue}\bfseries},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
	morestring=[s]{"""*}{*"""},
	ndkeywords={@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Any, Unit, Nothing},
	ndkeywordstyle={\color{BurntOrange}\bfseries},
	sensitive=true,
	stringstyle={\color{ForestGreen}\ttfamily},
}
\chapter{Kod źródłowy aplikacji na telefon z systemem operacyjnym Android}

\begin{lstlisting}[language=Kotlin, xleftmargin=0pt, backgroundcolor={\color{white}}, caption={}, frame=""]
library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned.all;
use ieee.std_logic_arith.all;

entity shift_reg is
generic(N: integer range 0 to 32 := 8);
port (
clk, reset, load  : in  std_logic;
pos, reg_in       : in  std_logic_vector(N-1 downto 0);
reg_out           : out std_logic_vector(N-1 downto 0));
end shift_reg;

architecture rtl of shift_reg is
signal rejestr: std_logic_vector(N-1 downto 0);

begin
process (clk, reset, load, reg_in)
begin
  if (reset = '0') then 
    rejestr <= (others => '0');
   elsif (load = '0') then
     rejestr <= reg_in;
   elsif (rising_edge(clk)) then
     rejestr (N-1 downto conv_integer(pos)) <= rejestr(N-1-conv_integer(pos) downto 0);
     rejestr (conv_integer(pos) downto 0)   <= (others => '0');
  end if;
end process;

reg_out <= rejestr;
end rtl;
\end{lstlisting}
